# U-Boot 调试

## 1. 更新 U-Boot 方法

1. 使用 emulator 烧写器更新
2. 使用 RS-232 串口更新
3. 使用 tftp 协议从网络更新

## 2. 两路网络通信

MAC 控制器有2个，uboot的协议栈只支持一路通信，不支持两路同时通信

通过修改 PHY 芯片驱动，d2000.c 初始化流程增加写寄存器操作实现了两路网络都可通信，使用的是同一个 IP

Linux 内核中也需要修改对应的 PHY 驱动，否则更换内核后网络会不稳定 **TODO**

## 3. 启动校验

> 与厂商确认， D2000 属于非安全芯片，PBF 不支持启动校验

~~从可信 U-Boot 启动~~

## 4. 环境变量统一化

> 注意环境变量的存储空间，不能超过存储空间

1. 将不使用的环境变量删除，只保留我们需要的环境变量 **TODO**

## 5. 引导操作系统

1. 从网络启动临时引导内核

2. 从 SSD 引导 openEuler 5.10 内核 **TODO**

## 6. 启动时间优化

1. 减少不必要的日志打印，缩短启动时间
2. 减少不必要初始化流程：**TODO**
