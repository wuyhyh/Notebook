# 运算处理模块测试用例与测试报告

## 0 文档信息

* 文档名称：运算处理模块测试用例与测试报告
* 项目名称：国产运算处理模块测试验证技术研究
* 版本号：V1.0
* 编制单位：XXX
* 编写人：×××
* 审核人：×××
* 日期：2025-12-XX

---

## 1 引言

### 1.1 编写目的

本文件在《运算处理模块测试大纲》的基础上，给出运算处理模块的详细测试用例设计及实际测试结果记录。
通过本报告：

1. 说明各项功能、性能、可靠性需求的测试方法和执行步骤；
2. 记录测试过程中得到的原始数据、截图和结论；
3. 为甲乙双方的系统验收和后续版本迭代提供依据和追踪线索。

### 1.2 适用范围

本报告适用于以下软硬件版本的运算处理模块及测试验证平台：

* 运算处理模块硬件：国产 ARM64 平台（含 CPU、内存、以太网、串口等外设）；
* 启动加载程序：U-Boot 2019.07-Ver1.37（乙方移植版本）；
* 操作系统：openEuler Embedded 24.03-LTS（内核版本 5.10）；
* 运算处理模块驱动软件与陪测软件：V1.0。

### 1.3 测试依据

* 《国产运算处理模块测试验证技术研究 技术协议》
* 《运算处理模块测试大纲》V1.0
* 《openEuler Embedded 用户指南》
* 《U-Boot 移植与使用说明》
* 相关行业标准（IEEE 802.3 等）

### 1.4 术语和缩略语

同《测试大纲》，不再赘述。

---

## 2 测试概况

### 2.1 被测对象及版本信息

| 项目         | 描述                           |
|------------|------------------------------|
| 被测设备（DUT）  | 国产 ARM64 运算处理模块 1 套          |
| Bootloader | U-Boot 2019.07-Ver1.37       |
| OS         | openEuler Embedded 24.03-LTS |
| 内核版本       | 5.10                         |
| 驱动与陪测软件版本  | V1.0                         |
| 测试时间       | 2025-MM-DD ～ 2025-MM-DD      |
| 测试地点       | ××× 实验室                      |

### 2.2 测试环境

1. **硬件环境**

    * 被测运算处理模块及电源；
    * 上位机（Windows 11 / Linux，用于 SSH、串口调试与抓包）；
    * 千兆以太网交换机与测试对端主机；
    * 串口线（USB-TTL）、网线；
    * 如需要：逻辑分析仪/示波器用于周期和采样频率测量。

2. **软件环境**

    * 串口终端：MobaXterm / SecureCRT / minicom / PuTTY；
    * 网络工具：ping、iperf3、tcpdump、wireshark；
    * 性能工具：top、htop、free、mpstat 等；
    * 日志收集脚本与测试辅助脚本（由乙方编写）。

### 2.3 测试人员与分工

| 角色    | 姓名  | 职责说明            |
|-------|-----|-----------------|
| 测试负责人 | ××× | 制定计划、组织实施、汇总报告  |
| 测试工程师 | ××× | 执行具体测试用例、整理原始记录 |
| 开发代表  | 吴宇航 | 问题分析与修复，参与评审    |

---

## 3 需求 — 测试用例对应关系

### 3.1 需求编号约定

* F-xx：功能类需求（Functional）
* P-xx：性能类需求（Performance）
* R-xx：可靠性与稳定性需求（Reliability）

### 3.2 需求列表

| 需求编号 | 需求描述（摘自技术协议）                      |
|------|-----------------------------------|
| F-01 | 典型任务场景下软件执行周期不大于 10 ms            |
| F-02 | 板级状态监控：采集频率 ≥ 1 kHz，支持滤波与门限监控     |
| F-03 | 调试串口：根据 IO 状态自动切换为调试模式，波特率 115200 |
| F-04 | 软件在线加载：根据 IO 状态进入串口加载模式           |
| F-05 | CAN 总线通信：支持标准/扩展帧，完成解析和指令处理       |
| F-06 | 网络通信：完成千兆网络驱动开发，协议符合 IEEE802.3    |
| P-01 | 陪测软件识别并正确初始化所有硬件外设                |
| P-02 | 上电后陪测软件加载时间不超过 15 s               |
| P-03 | 系统空闲状态 CPU 占用率 ≤ 5%，内存使用率 ≤ 50%   |
| R-01 | 运算处理模块及陪测软件长时间运行稳定，无崩溃或重大错误       |
| R-02 | 断电/复位后可正常恢复启动，配置和数据无异常            |
| R-03 | CAN/网络异常输入情况下系统行为稳定、无异常退出         |

### 3.3 需求–用例对应表

| 需求编号 | 覆盖用例编号              |
|------|---------------------|
| F-01 | TC-F-01             |
| F-02 | TC-F-02-1、TC-F-02-2 |
| F-03 | TC-F-03             |
| F-04 | TC-F-04             |
| F-05 | TC-F-05-1、TC-F-05-2 |
| F-06 | TC-F-06-1、TC-F-06-2 |
| P-01 | TC-P-01             |
| P-02 | TC-P-02             |
| P-03 | TC-P-03-1、TC-P-03-2 |
| R-01 | TC-R-01             |
| R-02 | TC-R-02             |
| R-03 | TC-R-03-1、TC-R-03-2 |

---

## 4 功能测试用例

### 4.1 TC-F-01 典型任务周期测试

* **用例编号**：TC-F-01
* **关联需求**：F-01
* **测试目的**：验证在典型任务场景下，主控任务执行周期不大于 10 ms。

#### 前置条件

1. DUT 上电启动至 openEuler Embedded，陪测软件及典型业务任务已自动启动；
2. 在应用中已实现“任务心跳”IO 翻转或串口周期打印；
3. 逻辑分析仪/示波器已接入任务心跳 IO（如有），或串口终端可捕获时间戳。

#### 测试步骤

1. 通过串口登录系统，确认典型任务已启动且运行稳定；
2. 使用逻辑分析仪采集不少于 1000 个任务周期的波形；

    * 若使用串口时间戳，则采集连续 1000 条周期日志，并导出为文本；
3. 统计最大、最小及平均周期值；
4. 记录测试数据。

#### 预期结果

1. 所有任务周期均不大于 10 ms；
2. 周期抖动在系统设计允许范围内（由设计说明给出，如 ±1 ms）；
3. 不出现明显周期丢失或长时间停顿。

#### 测试记录与结论

* 数据统计表：

    * 最大周期：____ ms
    * 最小周期：____ ms
    * 平均周期：____ ms

* 截图与日志：

    * 【截图占位：图 4-1-1 任务周期波形】
    * 【日志占位：附件 log/TC-F-01-task_period.txt】

* 结论：

    * □ 通过 □ 不通过
    * 说明：________________________________________

---

### 4.2 TC-F-02-1 板级状态监控采样频率测试

* **用例编号**：TC-F-02-1
* **关联需求**：F-02
* **测试目的**：验证板级状态监控采集频率不低于 1 kHz。

#### 前置条件

1. 状态监控任务已启用并正常运行；
2. 应用支持输出采样时间戳或在外部触发脚上产生采样脉冲；
3. 测试设备：逻辑分析仪或串口终端。

#### 测试步骤

1. 如使用外部触发脚：

    1. 将逻辑分析仪接入采样脉冲输出脚；
    2. 连续采集不少于 1 s 的波形；
    3. 导出采样间隔数据。
2. 如通过软件时间戳：

    1. 打开调试接口，启用“采样时间戳”输出；
    2. 记录连续 2000 条采样记录；
    3. 统计相邻采样记录的时间差。

#### 预期结果

1. 计算得到的采样频率 ≥ 1 kHz（采样间隔 ≤ 1 ms）；
2. 波形/时间戳分布均匀，无长时间停顿。

#### 测试记录与结论

* 统计结果：

    * 最大采样间隔：____ ms
    * 最小采样间隔：____ ms
    * 平均采样间隔：____ ms

* 截图与日志：

    * 【截图占位：图 4-2-1 采样波形】
    * 【日志占位：附件 log/TC-F-02-1-sample_interval.txt】

* 结论：

    * □ 通过 □ 不通过
    * 说明：________________________________________

---

### 4.3 TC-F-02-2 板级状态监控门限及故障上报测试

* **用例编号**：TC-F-02-2
* **关联需求**：F-02
* **测试目的**：验证门限配置与故障记录/IO 置位/中断服务的正确性。

#### 前置条件

1. 板级状态监控任务运行正常，门限参数已配置在可修改位置；
2. 有可调信号源（可编程电源或函数发生器）接入被监控通道；
3. 上位机可读取故障日志或监控缓冲区。

#### 测试步骤

1. 将输入信号设定在门限下方，保持 10 s，确认无故障上报；
2. 缓慢调高输入信号，使其超过门限；
3. 观察以下行为：

    * IO 置位情况（如指示灯点亮）；
    * 故障记录是否写入日志/缓冲区；
    * 是否触发中断服务程序（如有）。
4. 将信号恢复到正常范围，观察故障是否按设计清除或记为历史故障。

#### 预期结果

1. 输入超过门限后的一个采样周期内，系统产生正确的故障响应；
2. 故障记录内容包括时间戳、通道号、故障类型等关键信息；
3. 系统响应过程中，主循环无明显阻塞。

#### 测试记录与结论

* 【截图占位：图 4-3-1 故障 IO 及日志截图】

* 【日志占位：附件 log/TC-F-02-2-fault.log】

* 结论：

    * □ 通过 □ 不通过
    * 说明：________________________________________

---

### 4.4 TC-F-03 调试串口模式切换测试

* **用例编号**：TC-F-03
* **关联需求**：F-03
* **测试目的**：验证根据 IO 状态自动切换为调试模式，并使用 115200 波特率通信。

#### 前置条件

1. 调试串口通过 USB-串口线连接上位机；
2. 模式选择 IO 已接出到拨码开关或跳线帽；
3. 串口终端软件可切换波特率。

#### 测试步骤

1. 将模式 IO 设置为“运行模式”，上电启动 DUT；

    * 确认串口仅输出启动日志，无交互式调试菜单；
2. 断电，将模式 IO 切换为“调试模式”，重新上电；
3. 将串口终端波特率设为 115200，校验位/数据位/停止位按协议配置；
4. 观察启动过程中是否进入调试菜单或命令行；
5. 发送一条简单命令（如 `help`），检查回显内容。

#### 预期结果

1. 运行模式下不进入调试菜单；
2. 调试模式下在 115200 波特率下终端显示正常，无乱码；
3. 收发命令正确，回显逻辑与设计说明一致。

#### 测试记录与结论

* 【截图占位：图 4-4-1 运行模式串口输出】

* 【截图占位：图 4-4-2 调试模式串口菜单】

* 结论：

    * □ 通过 □ 不通过
    * 说明：________________________________________

---

### 4.5 TC-F-04 软件在线加载功能测试

* **用例编号**：TC-F-04
* **关联需求**：F-04
* **测试目的**：验证根据 IO 状态进入串口加载模式，并可通过上位机完成软件镜像在线加载。

#### 前置条件

1. 在线加载串口与上位机连接；
2. 上位机安装在线加载工具（自研脚本或串口下载工具）；
3. 有合法的软件镜像文件（大小、校验正确）。

#### 测试步骤

1. 将模式 IO 设置为“加载模式”，上电；
2. 观察串口输出，确认进入加载等待状态（例如显示“Waiting for image ...”）；
3. 使用上位机工具发送镜像文件；
4. 观察下载进度、校验信息及烧写完成提示；
5. 重启系统，检查新版本软件是否生效（可通过版本号或特征行为判断）。

#### 预期结果

1. 模块可正确识别加载模式并停留在等待状态；
2. 下载过程中无报错，校验通过；
3. 下载完成后软件版本正确更新，旧版本功能被替换；
4. 异常中断（可选测试）时，有合理的错误提示和回滚/重新加载机制。

#### 测试记录与结论

* 【截图占位：图 4-5-1 加载模式串口提示】

* 【截图占位：图 4-5-2 上位机下载工具界面】

* 结论：

    * □ 通过 □ 不通过
    * 说明：________________________________________

---

### 4.6 TC-F-05-1 CAN 正常通信测试

* **用例编号**：TC-F-05-1
* **关联需求**：F-05
* **测试目的**：验证 CAN 总线标准帧/扩展帧的收发及命令解析能力。

#### 前置条件

1. DUT CAN 口与 CAN 分析仪或对端模块连接；
2. 波特率、采样点等总线参数配置一致；
3. 分析仪配置好一组命令和应答帧格式。

#### 测试步骤

1. 由对端或分析仪周期发送若干标准帧命令；
2. 抓取 DUT 接收帧并保存；
3. 检查 DUT 是否根据命令执行对应动作并回发响应帧；
4. 更换为扩展帧 ID 的命令重复上述步骤。

#### 预期结果

1. 接收帧的 ID、数据域与发送端一致，无畸变；
2. DUT 按协议完成解析并执行动作；
3. 响应帧 ID、数据格式符合协议定义。

#### 测试记录与结论

* 【截图占位：图 4-6-1 CAN 抓包截图（标准帧）】

* 【截图占位：图 4-6-2 CAN 抓包截图（扩展帧）】

* 结论：

    * □ 通过 □ 不通过
    * 说明：________________________________________

---

### 4.7 TC-F-05-2 CAN 错误与异常恢复测试

（略写部分步骤，后续你按同样结构补充即可）

* 目的：发送错误帧、总线关断等情况，验证模块的恢复能力与错误日志。

---

### 4.8 TC-F-06-1 网络基本通信测试（Ping/SSH）

* **用例编号**：TC-F-06-1
* **关联需求**：F-06
* **测试目的**：验证千兆以太网链路建立、IP 配置以及基本连通性。

#### 前置条件

1. DUT 通过网线连接到交换机，对端为测试主机；
2. 已配置静态 IP，或 DHCP 服务器可用；
3. 上位机可 Ping 到同网段其他设备。

#### 测试步骤

1. 启动 DUT，使用 `ip addr` 检查网口状态及 IP 地址；
2. 在对端主机上执行 `ping DUT_IP`，观察丢包率和 RTT；
3. 尝试从对端 SSH 登录 DUT，执行简单命令验证交互。

#### 预期结果

1. 网络接口 `UP`，链路速度为 1000 Mb/s；
2. ping 包无丢失或丢包率很低，RTT 在合理范围；
3. SSH 登录成功，无明显卡顿。

#### 测试记录与结论

* 【截图占位：图 4-8-1 DUT ip addr 输出】

* 【截图占位：图 4-8-2 ping/SSH 截图】

* 结论：

    * □ 通过 □ 不通过
    * 说明：________________________________________

---

### 4.9 TC-F-06-2 网络数据收发及协议符合性测试

* 目的：使用 iperf3 或自定义协议，在 TCP/UDP 下进行数据收发，检查吞吐和错误率，同时抓包检查以太网帧格式符合 IEEE802.3。
* 步骤与结果记录同样采用结构化写法，此处不展开。

---

## 5 性能测试用例

### 5.1 TC-P-01 外设识别与初始化测试

* **关联需求**：P-01
* **目的**：验证系统启动后可识别并初始化所有硬件外设（网口、串口、CAN、存储等）。

主要步骤：

1. 观察启动日志（dmesg、内核 log）；
2. 执行 `ls /dev`、`ip link` 等命令检查设备节点；
3. 对每个外设做简单读写/环回测试。

记录：

* 【截图占位：图 5-1-1 内核日志】
* 【截图占位：图 5-1-2 设备节点列表】

---

### 5.2 TC-P-02 上电加载时间测试

对应之前在大纲里提到的“≤15 s”要求，结构和之前给你写过的用例一致，这里直接保留：

* 关键字段：上电时间戳 T0、系统就绪时间戳 T1（由“APP READY”日志或 LED 稳定点亮定义）；
* 记录 5 次，取最大值；
* 占位：

    * 【截图占位：图 5-2-1 串口启动时间线】
    * 【日志占位：log/TC-P-02-boot_time.log】

---

### 5.3 TC-P-03-1 空闲场景资源占用率测试

* **关联需求**：P-03
* **目的**：验证无业务负载时 CPU 占用率 ≤ 5%，内存使用率 ≤ 50%。

步骤：

1. 启动 DUT，确保仅系统与陪测软件运行，无额外业务；
2. 使用 `top` 或 `mpstat` 采样 5 分钟，记录 CPU idle% 平均值；
3. 使用 `free -m` 记录内存使用情况。

预期：

* CPU 使用率 = 100% - idle% ≤ 5%；
* `used / total` ≤ 50%。

占位：

* 【截图占位：图 5-3-1 top/htop 截图】
* 【截图占位：图 5-3-2 free 输出】

---

### 5.4 TC-P-03-2 典型业务场景资源占用率测试

同上，但在典型任务、CAN、网络业务同时运行情况下测量，主要看是否存在明显瓶颈，结果描述部分你按实测数据填写即可。

---

## 6 可靠性与稳定性测试用例

### 6.1 TC-R-01 长时间运行稳定性测试

* **关联需求**：R-01
* **目的**：验证运算处理模块及陪测软件在长时间运行中无崩溃或重大错误。

#### 前置条件

1. 典型业务场景任务已配置并可循环执行；
2. 有监控脚本定期采集系统状态（CPU、内存、进程存活、日志关键字等）。

#### 测试步骤

1. 启动 DUT 至正常业务模式；
2. 启动监控脚本，每 5 分钟记录一次系统状态；
3. 连续运行不少于 72 h；
4. 期间观察是否有系统重启、内核 OOPS、进程异常退出等情况；
5. 测试结束后汇总监控数据和日志。

#### 预期结果

1. 整个测试过程中 DUT 未出现死机、重启或严重错误；
2. CPU/内存资源保持在设计允许范围内，无持续升高趋势；
3. 应用进程无异常退出。

#### 测试记录与结论

* 【截图占位：图 6-1-1 监控曲线示意】

* 【日志占位：log/TC-R-01-monitor.csv】

* 结论：

    * □ 通过 □ 不通过
    * 说明：________________________________________

---

### 6.2 TC-R-02 断电/复位恢复测试

* **关联需求**：R-02
* **目的**：验证多次上电、复位过程中系统能稳定启动且配置/数据无异常。

主要步骤：

1. 连续进行 N 次（如 50 次）上电/断电循环；
2. 每次启动后检查版本号、关键配置文件、应用启动状态；
3. 统计启动成功率与异常情况。

占位：

* 【截图占位：图 6-2-1 复位循环示意】
* 【日志占位：log/TC-R-02-reboot_test.log】

---

### 6.3 TC-R-03-1 CAN 异常输入健壮性测试

* **关联需求**：R-03
* **目的**：向 DUT 注入非法或边界 CAN 帧，验证不会导致系统崩溃或异常重启。

步骤大致包括：

1. 使用 CAN 分析仪发送错误 CRC、非法长度或未定义指令的帧；
2. 监控 DUT 日志和进程状态；
3. 检查是否产生合理的错误提示而非异常退出。

---

### 6.4 TC-R-03-2 网络异常健壮性测试

类似地，通过大量异常 TCP/UDP 连接、乱序/丢包环境等，验证网络栈及应用的健壮性。

---

## 7 测试结果汇总

### 7.1 用例执行统计

| 类别    | 用例总数 | 通过数量 | 不通过数量 | 备注 |
|-------|------|------|-------|----|
| 功能测试  | ____ | ____ | ____  |    |
| 性能测试  | ____ | ____ | ____  |    |
| 可靠性测试 | ____ | ____ | ____  |    |
| 合计    | ____ | ____ | ____  |    |

（由你在测试结束后填写）

### 7.2 不通过用例及问题列表

| 用例编号 | 问题描述 | 严重级别 | 根因分析 | 解决措施/状态 | 结论 |
|------|------|------|------|---------|----|
|      |      |      |      |         |    |

---

## 8 结论与建议

### 8.1 测试结论

根据本次测试结果：

1. 对应《技术协议》中功能需求 F-01 ～ F-06 的测试用例全部/大部分通过，说明运算处理模块已具备预期的任务调度、状态监控、串口、CAN
   与网络通信能力；
2. 对应性能需求 P-01 ～ P-03 的测试表明，系统在启动时间、资源占用率等方面满足/基本满足要求；
3. 可靠性与稳定性测试表明，系统在 ×× h 的运行过程中整体稳定，未发现/发现少量可接受的异常情况。

（这里你可以按实际测试结果进行调整和补充。）

### 8.2 后续建议

1. 建议在现场实际工况下补充 ×× 场景的测试，以进一步验证环境适应性；
2. 建议将监控与日志采集脚本固化为标准运维工具，便于后续升级与排障；
3. 对于测试中发现但暂未影响当前交付的低优先级问题，建议纳入后续版本规划。

---

## 9 附录

### 附录 A：测试截图索引

（示例）

| 图号      | 标题       | 所属用例      | 文件名示例                   |
|---------|----------|-----------|-------------------------|
| 图 4-1-1 | 任务周期波形   | TC-F-01   | img/TC-F-01-scope.png   |
| 图 4-2-1 | 状态监控采样波形 | TC-F-02-1 | img/TC-F-02-1-scope.png |
| …       | …        | …         | …                       |

### 附录 B：日志文件索引

| 序号 | 用例编号    | 日志说明       | 文件名示例                       |
|----|---------|------------|-----------------------------|
| 1  | TC-F-01 | 任务周期时间戳日志  | log/TC-F-01-task_period.txt |
| 2  | TC-P-02 | 启动时间测量串口输出 | log/TC-P-02-boot_time.log   |
| …  | …       | …          | …                           |

---

这样你就有了一份比较完整、结构清晰的《运算处理模块测试用例与测试报告》框架。
后续你只需要：

1. 按照这些用例执行实际测试；
2. 在预留的“测试记录与结论”“截图占位”“日志占位”位置填入你的截图和说明；
3. 最后在第 7 章和第 8 章写上真实的统计与结论，就可以直接交付给甲方了。

