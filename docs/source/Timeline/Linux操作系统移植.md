# Linux 操作系统移植

## 1. 从网络加载文件系统

Linux 在串口终端显示登录提示符之前，会挂载一个**文件系统**。

一个**文件系统**由一组预定义的系统目录和文件组成，这些目录和文件按照特定的布局存储在磁盘或其他存储介质上。

Linux 可以挂载这些介质作为其**根文件系统**，最常见的情况是挂载一个**硬盘分区**作为根文件系统。

在开发环境中挂载 NFS 根文件系统是非常灵活的。

## 2. 进入用户空间

内核会执行自己的代码，在一个称为**内核上下文**的环境中完成大量的初始化工作。

内核拥有所有的系统内存并且全权控制所有的系统资源。

当内核完成内部初始化并挂载根文件系统之后，默认会执行一个名为`init`的程序。

内核一启动 `init` ，随即进入了用户空间。

## 3. 闪存

闪存可以在软件的控制下写入和擦除数据。

闪存的存储空间被分割为相对较大的可擦除单元，称为擦除块。

NOR型闪存芯片向某个存储地址写入数据的方法是直接将其从二进制1改为0，但是要将数据从0改为1就要擦除整个擦除块。
在擦除的时候需要向闪存芯片写入一串特别的控制指令序列。

为了修改闪存阵列中的数据，必须完全擦除待修改数据所在的块。

> 你可以一次将一个字节从1改成0，但如果想将某个比特从0改回1，则必须擦除整个块。

NOR型闪存可以被微处理器直接访问，NAND型闪存更适合以文件系统的格式大容量存储数据。







